/* ================================================================
   GLOBAL MODAL & ALERT POSITIONING FIX
   Elite Salon - Universal Solution for All Pages
   
   PURPOSE: Fix inconsistent modal/alert positioning across website
   APPLIES TO: All pages (index, login, register, dashboard, etc.)
   
   WHY THE ISSUE OCCURS:
   - Bootstrap modals use position: fixed by default (correct)
   - However, parent containers with position: relative/absolute 
     or transform properties create NEW stacking contexts
   - This causes modals to position relative to parent, not viewport
   - Different page layouts = different parent containers = inconsistent positioning
   - Appointment page works because alerts have #global-alert-container
   - Other pages lack this container, causing alerts to float anywhere
   
   SOLUTION APPROACH:
   1. Force modals to always position from viewport (not parent)
   2. Create universal alert container for all pages
   3. Proper z-index hierarchy (navbar < alerts < modals < backdrop)
   4. Preserve all existing styles and functionality
   ================================================================ */

/* ================================================================
   PART 1: BOOTSTRAP MODAL GLOBAL FIX
   Forces modals to top-center regardless of parent container
   ================================================================ */

/* Modal overlay - always fixed to viewport */
.modal {
    /* Bootstrap default is position: fixed - enforce it */
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    overflow-x: hidden !important;
    overflow-y: auto !important;
    z-index: 1055 !important; /* Above alerts (1045) */
    
    /* Reset any transform that creates new stacking context */
    transform: none !important;
}

/* Modal dialog - centered horizontally, top-aligned vertically */
.modal-dialog {
    /* Top positioning with proper navbar clearance */
    margin-top: 80px !important;
    margin-bottom: 20px !important;
    margin-left: auto !important;
    margin-right: auto !important;
    
    /* Center horizontally */
    max-width: 600px !important;
    width: calc(100% - 2rem) !important;
    
    /* Reset positioning */
    position: relative !important;
    transform: none !important;
    
    /* Ensure it doesn't inherit problematic styles */
    left: auto !important;
    right: auto !important;
}

/* Large modal variant */
.modal-dialog.modal-lg {
    max-width: 800px !important;
}

/* Extra large modal variant */
.modal-dialog.modal-xl {
    max-width: 1140px !important;
}

/* Small modal variant */
.modal-dialog.modal-sm {
    max-width: 400px !important;
}

/* Modal content - style only, no positioning */
.modal-content {
    /* Reset any absolute positioning */
    position: relative !important;
    transform: none !important;
    left: auto !important;
    right: auto !important;
    
    /* Preserve existing glassmorphism styles */
    /* (Color theory, borders, shadows remain intact) */
}

/* Modal backdrop - behind everything */
.modal-backdrop {
    /* Bootstrap default z-index is 1050 */
    z-index: 1050 !important; /* Behind modal (1055) */
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
}

/* When modal is open, prevent body scroll */
body.modal-open {
    overflow: hidden !important;
}

/* ================================================================
   PART 2: UNIVERSAL ALERT SYSTEM
   Creates consistent alert positioning across ALL pages
   ================================================================ */

/* Global alert container - inject dynamically if missing */
#global-alert-container {
    /* Fixed positioning at top-center */
    position: fixed !important;
    top: 70px !important; /* Below navbar */
    left: 50% !important;
    transform: translateX(-50%) !important;
    
    /* Responsive width */
    width: 90% !important;
    max-width: 800px !important;
    
    /* Z-index: above content, below modals */
    z-index: 1045 !important; /* Below modals (1055), above navbar (1030) */
    
    /* Allow clicks to pass through empty space */
    pointer-events: none !important;
    
    /* Stack alerts vertically */
    display: flex !important;
    flex-direction: column !important;
    gap: 10px !important;
}

/* Alert cards inside container */
#global-alert-container .alert {
    /* Re-enable clicking on alerts themselves */
    pointer-events: auto !important;
    
    /* Remove margin (gap handles spacing) */
    margin: 0 !important;
    
    /* Ensure visibility */
    position: relative !important;
    z-index: 1 !important;
}

/* Fallback: Alerts outside container (legacy support) */
.alert:not(#global-alert-container .alert) {
    /* If alert is NOT in global container, try to fix it */
    position: relative !important;
    z-index: 1045 !important;
    margin-bottom: 1rem !important;
}

/* ================================================================
   PART 3: PRESERVE EXISTING STYLES
   Do NOT override color theory, gradients, shadows, or themes
   ================================================================ */

/* These selectors preserve styles from luxury-theme.css and styles.css */
/* NO changes to: */
/* - .alert-success, .alert-danger, .alert-warning, .alert-info colors */
/* - .modal-header, .modal-body, .modal-footer backgrounds */
/* - Border colors, shadows, gradients, glassmorphism effects */
/* - Button styles, form controls, badges */
/* - Font sizes, padding, margins (except positioning-related) */

/* ================================================================
   PART 4: RESPONSIVE ADJUSTMENTS
   Maintain positioning on mobile/tablet devices
   ================================================================ */

@media (max-width: 992px) {
    #global-alert-container {
        top: 65px !important;
        width: 92% !important;
    }
    
    .modal-dialog {
        margin-top: 70px !important;
    }
}

@media (max-width: 768px) {
    #global-alert-container {
        top: 60px !important;
        width: 95% !important;
    }
    
    .modal-dialog {
        margin-top: 60px !important;
        width: calc(100% - 1rem) !important;
    }
}

@media (max-width: 576px) {
    #global-alert-container {
        top: 55px !important;
        width: 98% !important;
    }
    
    .modal-dialog {
        margin-top: 50px !important;
        width: calc(100% - 0.5rem) !important;
    }
}

/* ================================================================
   PART 5: ANIMATION SUPPORT
   Preserve existing alert/modal animations
   ================================================================ */

/* Modal fade animation (Bootstrap default) */
.modal.fade .modal-dialog {
    transition: transform 0.3s ease-out !important;
}

.modal.show .modal-dialog {
    transform: none !important;
}

/* Alert slide-in animation (if exists) */
@keyframes slideInDown {
    from {
        transform: translateY(-20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.alert.fade.show {
    animation: slideInDown 0.3s ease-out !important;
}

/* ================================================================
   PART 6: EDGE CASES & COMPATIBILITY
   Handle special scenarios
   ================================================================ */

/* Nested modals (if any) */
.modal .modal {
    z-index: 1060 !important; /* Stack above parent modal */
}

.modal .modal-backdrop {
    z-index: 1059 !important;
}

/* Fullscreen modals (if any) */
.modal-fullscreen .modal-dialog {
    margin: 0 !important;
    width: 100% !important;
    max-width: none !important;
    height: 100% !important;
}

/* Modal inside fixed elements */
.fixed-element .modal,
.position-fixed .modal {
    /* Force escape from parent stacking context */
    position: fixed !important;
    left: 0 !important;
    right: 0 !important;
}

/* Alerts inside tables or cards */
.table .alert,
.card .alert {
    /* Prevent table/card positioning from affecting alerts */
    position: static !important;
}

/* ================================================================
   END OF GLOBAL MODAL & ALERT FIX
   
   TESTING CHECKLIST:
   ✓ Modals open at top-center on all pages
   ✓ Alerts appear below navbar, horizontally centered
   ✓ Modal backdrop covers entire viewport
   ✓ Z-index: navbar < alerts < modals < backdrop
   ✓ Existing colors, shadows, themes preserved
   ✓ Forms, buttons, close actions work correctly
   ✓ Responsive on mobile/tablet
   ✓ No layout breaks on any page
   ================================================================ */
